## 数据库设计

### 基本概念

- 在进行需求分析后，数据库设计分为三步：
  - 设计概念数据模型
  - 设计逻辑数据模型
  - 设计物理数据模型

### `ER`模型设计

- `ER`模型是最常见的概念数据模型，全称`Entity-Relationship`模型，即实体-联系模型

- `ER`模型由以下部分组成：

  - 实体集
  - 联系集
  - 属性和它的域

- 属性的类型：

  - 简单类型

  - 复合类型：由多个属性组成的属性，在`ER`模型中表示为：
    ```
    composite_attribute
    	component_1
    	...
    ```

    即由缩进表示从属关系

  - 多值类型：可能同时含有多个值的类型，在`ER`模型中表示为：
    ```
    {multivalue_attribute}
    ```

  - 派生属性(或导出属性)：可以由其它属性求出的属性，在`ER`模型中表示为：
    ```
    derived_attribute()
    ```

  - 作为码的属性：在`ER`模型中用**下划线**指出

- 实体由属性和具体的值表示，由所有可能的实体构成的集合就是实体集
  实体集在`ER`模型中表示为方框，上面是实体集名称，下面是属性集合

- 联系是若干实体之间的关联，也就是一个联系允许关联多个实体(但本文仅考虑二元联系)，但**不允许有关联联系的联系**
  由相同类型的联系构成的集合就是联系集，在`ER`模型中表示为棱形
  一个联系集允许有不同于相关联实体集属性的属性，称为**描述性属性**，在`ER`模型中表示为由**虚线引出的方框**中的属性

- 参与度约束：

  - 称一个实体**参与**一个联系集，是一个实体**至少对应一个**另一端的实体，即限制对应关系的**下限**
  - 称一个实体集**完全参与**一个联系集，是这个实体集的所有实体都参与这个联系集
    否则称这个实体集**部分参与**这个联系集
  - 完全参与和部分参与在`ER`模型中表示为双线、单线

- 映射基数约束：限制对应关系的**上限**，分为一对一基数、一对多基数、多对多基数

  - 一对一基数：双方实体集都满足“所有实体**至多对应一个**另一端的实体”
  - 一对多(或多对一)基数：对于多方实体集，没有上述限制
  - 多对多基数：对于双方实体集都没有上限的限制

- 码约束：

  - 对于实体集来说，用户定义的码属性就是该实体集的码，它们的某个值必须能够唯一标识一个实体
  - 对于联系集来说，多方实体集的码属性就是联系集的码；如果两边都是多方，则使用双方的码作为联系集的码；如果双方都是“一”方，则使用任意一方的码作为联系集的码
  - `ER`模型中不允许出现起外码功能的属性，如果实体集中存在这样的属性则需要删去
    如果删去后剩余的码属性无法唯一标识一个实体，但依赖于另一方的码属性后又可以唯一标识时，则称该实体集为**弱实体集**，关联该弱实体集和其依赖的强实体集的**联系集**用**双棱形**表示
    弱实体集的“码属性”没有码的职责，因此它们的集合称为**分辨符**，用**虚线下划线**表示

### 关系型数据模型设计

- 关系型数据模型是一种逻辑数据模型，将`ER`模型转化为关系型数据模型
- 对于所有一对一的联系集，联系集不需要单独作为一个关系，两个实体集各作为一个关系，联系集的属性可作为任意一个实体集的属性
- 